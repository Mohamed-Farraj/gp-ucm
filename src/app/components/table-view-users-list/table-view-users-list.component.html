<section>
    <div class="filteration container-fluid p-3">
        <div class="row justify-content-center">

             <!-- Search input -->
          <div class="col-12 col-sm-10 col-md-8 col-lg-4 mb-3">
            <input
              type="text"
              class="form-control rounded-pill"
              placeholder="ابحث بالاسم أو الرقم القومي"
              [formControl]="searchControl"
            />
          </div>

          <!-- Sort dropdown -->
          <div class="col-12 col-sm-10 col-md-8 col-lg-4 mb-3">
            <select class="form-select" [formControl]="sortControl">
              <option value="normal">الاقدم اولا</option>
              <option value="reverse">الاحدث اولا</option>
            </select>
          </div>
      
          <!-- Status checkboxes -->
          <div class="col-12 col-sm-10 col-md-8 col-lg-4 mb-3 text-center">
            <div class="btn-group d-inline-flex flex-wrap justify-content-center" 
                 role="group" 
                 aria-label="Basic checkbox toggle button group">
              
              <!-- تحت المراجعة -->
              <input type="checkbox" 
                     value="UNDER_REVIEW"
                     id="underReview" 
                     class="btn-check"
                     (change)="onStatusChange($event)"
                     autocomplete="off">
              <label class="btn btn-outline-warning rounded-start-pill" 
                     for="underReview">
                تحت المراجعة
              </label>
      
              <!-- مقبول -->
              <input type="checkbox" 
                     value="ACCEPTED"
                     id="accepted" 
                     class="btn-check"
                     (change)="onStatusChange($event)"
                     autocomplete="off">
              <label class="btn btn-outline-success rounded-0 border-end-0" 
                     for="accepted">
                مقبول
              </label>
      
              <!-- مرفوض -->
              <input type="checkbox" 
                     value="REJECTED"
                     id="rejected" 
                     class="btn-check"
                     (change)="onStatusChange($event)"
                     autocomplete="off">
              <label class="btn btn-outline-danger rounded-end-pill" 
                     for="rejected">
                مرفوض
              </label>
            </div>
          </div>
      
         
        </div>
      </div>

      <h4 class="text-center">
        عدد الطلبات:
        {{
          searchControl.value || selectedStatuses.length > 0
            ? filteredItems.length
            : res.length
        }}
      </h4>


        <table class="table m-auto table-hover">
            <thead class="">
              <tr class="">
                <th scope="col">الرقم القومي</th>
                <th scope="col">الاسم</th>
                <th scope="col">الموبايل</th>
                <th scope="col">العنوان</th>
                <th scope="col">الكلية</th>
                <th scope="col">الفرقة</th>
                <th scope="col"></th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody class="">
              @for (item of pagedItems; track $index) 
              {
                <tr (click)="RowClick(item)" class="cursor-pointer">
                  <th scope="row">{{item?.nationalId}}</th>
                  <td>{{ item?.firstName }} {{ item?.lastName }}</td>
                  <td>{{item?.mobileNumber}}</td>
                  <td>{{item?.residenceAddress}}</td>
                  <td>{{item?.faculty}}</td>
                  <td>{{item?.level}}</td>
                  <td><button (click)=" $event.stopPropagation()" class="btn px-4 rounded rounded-pill btn-warning">تعديل</button></td>
                  <td><button (click)="deleteAr(item?.building?.id,item?.id); $event.stopPropagation()" class="btn px-4 rounded rounded-pill btn-danger">حذف</button></td>
                </tr>
              }
        
            </tbody>
          </table>
        
          <nav dir="rtl" aria-label="Page navigation">
            <ul class="pagination justify-content-center">
              <li class="page-item" [class.disabled]="currentPage === 1">
                <a
                  class="cursor-pointer page-link rounded-start-pill rounded"
                  (click)="changePage(currentPage - 1)"
                >
                  السابق
                </a>
              </li>
              <li
                class="page-item"
                *ngFor="let page of getDisplayedPages()"
                [class.active]="page === currentPage"
              >
                <a
                  class="cursor-pointer page-link"
                  (click)="changePage(page)"
                  >{{ page }}</a
                >
              </li>
              <li
                class="page-item"
                [class.disabled]="currentPage === totalPages"
              >
                <a
                  class="cursor-pointer page-link rounded-end-pill rounded"
                  (click)="changePage(currentPage + 1)"
                >
                  التالي
                </a>
              </li>
            </ul>
          </nav>
</section>
